<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editovatelná Tabulka</title>
    <style>
        table {
            max-width: 100vw;
            border-collapse: collapse;
        }

        td input {
            width: 100%;
            box-sizing: border-box;
            width: 150px;
            height: 18px;
        }

        .selected {
            background-color: yellow;
            /* nebo jiná barva pro zvýraznění */
        }
    </style>
</head>

<body>
    <button onclick="addRowBottom()">Přidej řádek dolu</button>
    <button onclick="addRowTop()">Přidej řádek nahoru</button>
    <button onclick="addColumnLeft()">Přidej sloupec vlevo</button>
    <button onclick="addColumnRight()">Přidej sloupec vpravo</button>
    <button onclick="removeRow()">Odeber řádek</button>
    <button onclick="removeColumn()">Odeber sloupec</button>

    <table id="editableTable">
        <tr>
            <td><input type="text" value="" onclick="cellClicked(this)"></td>
            <td><input type="text" value="" onclick="cellClicked(this)"></td>
        </tr>
        <tr>
            <td><input type="text" value="" onclick="cellClicked(this)"></td>
            <td><input type="text" value="" onclick="cellClicked(this)"></td>
        </tr>
    </table>
    <br>

    <script>
        function addRowBottom() {
            const table = document.getElementById('editableTable');
            let cols = table.rows[0].cells.length; // Získejte počet sloupců z první řady
            const row = table.insertRow(kdejsemradek === -1 ? table.rows.length : kdejsemradek + 1);
            for (let i = 0; i < cols; i++) {
                const cell = row.insertCell(i);
                cell.innerHTML = '<input type="text" value="" onclick="cellClicked(this)">';
            }

        }

        function addRowTop() {
            const table = document.getElementById('editableTable');
            let cols = table.rows[0].cells.length;
            const row = table.insertRow(kdejsemradek === -1 ? 0 : kdejsemradek);
            for (let i = 0; i < cols; i++) {
                const cell = row.insertCell(i);
                cell.innerHTML = '<input type="text" value="" onclick="cellClicked(this)">';
            }

        }

        function addColumnLeft() {
            const table = document.getElementById('editableTable');
            for (let i = 0; i < table.rows.length; i++) {
                const cell = table.rows[i].insertCell(kdejsemsloupec === -1 ? 0 : kdejsemsloupec);
                cell.innerHTML = '<input type="text" value="" onclick="cellClicked(this)">';
            }
        }

        function addColumnRight() {
            const table = document.getElementById('editableTable');
            for (let i = 0; i < table.rows.length; i++) {
                const cell = table.rows[i].insertCell(kdejsemsloupec === -1 ? (table.rows[i].cells.length) : kdejsemsloupec + 1);
                cell.innerHTML = '<input type="text" value="" onclick="cellClicked(this)">';
            }
        }

        function removeRow() {
            if (kdejsemradek !== -1) {
                const table = document.getElementById('editableTable');
                table.deleteRow(kdejsemradek);
                kdejsemradek = -1; // Resetování pozice po odstranění
            }
        }

        function removeColumn() {
            if (kdejsemsloupec !== -1) {
                const table = document.getElementById('editableTable');
                for (let i = 0; i < table.rows.length; i++) {
                    table.rows[i].deleteCell(kdejsemsloupec);
                }
                kdejsemsloupec = -1; // Resetování pozice po odstranění
            }
        }

        let kdejsemradek = -1;
        let kdejsemsloupec = -1;

        function cellClicked(cell) {
            // Odstraní třídu "selected" ze všech buněk
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                input.classList.remove('selected');
            });

            // Přidá třídu "selected" k aktuálně vybrané buňce
            cell.classList.add('selected');

            kdejsemradek = cell.parentElement.parentElement.rowIndex;
            kdejsemsloupec = cell.parentElement.cellIndex;
            console.log("Clicked on row: " + kdejsemradek + ", column: " + kdejsemsloupec);
        }
        // Reset kdejsemradek a kdejsemsloupec, pokud kliknete mimo tabulku
        
        document.addEventListener('click', function (event) {
            const table = document.getElementById('editableTable');
            // Zkontrolovat, zda kliknutí není na tlačítku
            if (!table.contains(event.target) && event.target.tagName !== 'BUTTON') {
                kdejsemradek = -1; // Reset na -1, pokud kliknete mimo tabulku
                kdejsemsloupec = -1; // Reset na -1, pokud kliknete mimo tabulku

                // Odstranit třídu "selected" ze všech buněk
                const inputs = document.querySelectorAll('input[type="text"]');
                inputs.forEach(input => {
                    input.classList.remove('selected');
                });
            }
        });
    </script>

</body>

</html>